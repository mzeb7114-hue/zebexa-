<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>EXA â€” Who You Are</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,300;9..144,400&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css" />

<style>
.honorific::before,
.honorific::after{ content:none; }

.photo-preview{
  width:170px;
  height:170px;
}
</style>
</head>

<body>

<main class="container fade-in" id="profile-app">
<div class="profile-container">

<div class="honorific">
your presence is requested
</div>

<section class="brand">
<h1 class="exa">EXA</h1>
<p class="tagline">
before you enter<br />
<span id="honorific-message">who you are, matters</span>
</p>
</section>

<section class="card" id="profile-card">

<form id="profile-form">

<!-- PHOTO OPTIONAL -->
<div class="photo-section">
<div class="photo-label">your reflection</div>
<div class="photo-container">
<div class="photo-preview" id="photo-preview">
<div class="placeholder-icon" id="photo-placeholder">ğŸ‘¤</div>
<img id="photo-image" style="display:none;" />
</div>
<div class="photo-options">
<button type="button" class="photo-btn"
onclick="document.getElementById('photo-upload').click()">ğŸ“· gallery</button>
<input id="photo-upload" type="file" accept="image/*">
</div>
</div>
</div>

<!-- REQUIRED -->
<div class="field-group">
<label>what may we call you</label>
<input id="full-name" type="text" required>
</div>

<div class="field-group">
<label>your date of birth</label>
<input id="dob" type="date" required>
</div>

<div class="field-group">
<label>your gender</label>
<select id="gender" required>
<option value="" disabled selected>â€” honor your truth â€”</option>
<option value="female">female</option>
<option value="male">male</option>
<option value="non-binary">non-binary</option>
<option value="prefer-not-to-say">prefer not to say</option>
<option value="other">other</option>
</select>
</div>

<!-- OPTIONAL -->
<div class="field-group optional-field">
<label>your city</label>
<input id="city" type="text">
</div>

<div class="field-group optional-field">
<label>your country</label>
<input id="country" type="text">
</div>

<div class="field-group optional-field">
<label>a brief bio</label>
<textarea id="bio" rows="2"></textarea>
</div>

<button id="save-profile-btn" type="submit">
present yourself with honor
</button>

<!-- EDIT PROFILE BUTTON ADDED -->
<button id="edit-profile-btn" type="button">
edit profile later
</button>

<div id="profile-message" class="message"></div>

</form>
</section>

<div class="palace-footer">
<span>â–</span> your presence honors us <span>â–</span>
</div>

</div>
</main>

<script>

/* PHOTO PREVIEW */
document.getElementById('photo-upload').addEventListener('change', e=>{
const file=e.target.files[0];
if(!file)return;
const reader=new FileReader();
reader.onload=ev=>{
document.getElementById('photo-image').src=ev.target.result;
document.getElementById('photo-image').style.display='block';
document.getElementById('photo-placeholder').style.display='none';
};
reader.readAsDataURL(file);
});

/* VALIDATION â€“ ONLY 3 FIELDS */
document.getElementById('profile-form').addEventListener('submit', e=>{

const name=document.getElementById('full-name').value.trim();
const dob=document.getElementById('dob').value;
const gender=document.getElementById('gender').value;

if(!name || !dob || !gender){
e.preventDefault();
document.getElementById('profile-message').innerText=
"Please fill Full Name, Date of Birth and Gender.";
return;
}

document.getElementById('profile-message').innerText="Profile saved.";
});

/* EDIT PROFILE BUTTON */
document.getElementById('edit-profile-btn').addEventListener('click',()=>{
window.location.href="orientation.html";
});

</script>

<script src="profile.js"></script>

</body>
  </html>
